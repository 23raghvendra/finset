/* ========================================
   RESPONSIVE UTILITIES - Mobile First
   ======================================== */

/* Global Mobile Reset */
* {
  -webkit-tap-highlight-color: transparent;
  box-sizing: border-box;
}

/* ==========================================
   MOBILE STYLES (0-639px)
   ========================================== */
@media (max-width: 639px) {
  /* Typography - Mobile */
  h1 { font-size: 1.5rem !important; line-height: 1.3; }
  h2 { font-size: 1.25rem !important; line-height: 1.3; }
  h3 { font-size: 1.125rem !important; }
  h4 { font-size: 1rem !important; }
  
  /* Grid System - Single Column on Mobile */
  .grid-cols-2,
  .grid-cols-3,
  .grid-cols-4,
  .grid-cols-5,
  .grid-cols-6 {
    grid-template-columns: 1fr !important;
  }
  
  /* Col spans - Full width on mobile */
  .col-span-2,
  .col-span-3,
  .col-span-4 {
    grid-column: span 1 !important;
  }
  
  /* Spacing - Reduced on mobile */
  .p-5, .p-6, .p-8 { padding: 1rem !important; }
  .px-5, .px-6 { padding-left: 0.75rem !important; padding-right: 0.75rem !important; }
  .py-5, .py-6 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
  .gap-4, .gap-5, .gap-6 { gap: 0.75rem !important; }
  .mb-4, .mb-5, .mb-6 { margin-bottom: 0.75rem !important; }
  
  /* Cards */
  .card {
    border-radius: 0.875rem !important;
    padding: 0.875rem !important;
  }
  
  /* Buttons - Touch Friendly */
  .btn {
    padding: 0.75rem 1rem !important;
    font-size: 0.875rem !important;
    min-height: 44px !important;
    border-radius: 0.75rem !important;
  }
  
  .btn-primary {
    width: 100%;
  }
  
  /* Text sizes */
  .text-2xl { font-size: 1.25rem !important; }
  .text-xl { font-size: 1.125rem !important; }
  .text-lg { font-size: 1rem !important; }
  
  /* Stat values */
  .stat-value {
    font-size: 1.375rem !important;
  }
  
  /* Hide on mobile */
  .hide-mobile,
  .md\\:block {
    display: none !important;
  }
  
  /* Show only on mobile */
  .show-mobile {
    display: block !important;
  }
  
  /* Full width on mobile */
  .mobile-full,
  .w-full-mobile {
    width: 100% !important;
  }
  
  /* Max width container */
  .max-w-7xl {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
  
  /* Flex direction column on mobile */
  .flex-mobile-col {
    flex-direction: column !important;
  }
}

/* ==========================================
   SMALL TABLETS (640-767px)
   ========================================== */
@media (min-width: 640px) and (max-width: 767px) {
  h1 { font-size: 1.75rem !important; }
  h2 { font-size: 1.5rem !important; }
  
  .grid-cols-3,
  .grid-cols-4,
  .grid-cols-5,
  .grid-cols-6 {
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  .col-span-2 {
    grid-column: span 2 !important;
  }
  
  .col-span-3,
  .col-span-4 {
    grid-column: span 2 !important;
  }
}

/* ==========================================
   TABLETS (768-1023px)
   ========================================== */
@media (min-width: 768px) and (max-width: 1023px) {
  .grid-cols-4 { grid-template-columns: repeat(2, 1fr) !important; }
  .grid-cols-5 { grid-template-columns: repeat(3, 1fr) !important; }
  .grid-cols-6 { grid-template-columns: repeat(3, 1fr) !important; }
  
  .col-span-2 {
    grid-column: span 1 !important;
  }
  
  .hide-tablet {
    display: none !important;
  }
}

/* ==========================================
   DESKTOP (1024px+)
   ========================================== */
@media (min-width: 1024px) {
  .hide-desktop {
    display: none !important;
  }
  
  .show-mobile {
    display: none !important;
  }
}

/* ==========================================
   MODAL RESPONSIVE STYLES
   ========================================== */
.modal-overlay {
  padding: 1rem;
}

.modal-content {
  width: 100%;
  max-width: 95vw;
  max-height: calc(100vh - 2rem);
  margin: auto;
  overflow-y: auto;
  overflow-x: hidden;
}

@media (max-width: 639px) {
  .modal-overlay {
    padding: 0.5rem;
    align-items: flex-end;
  }
  
  .modal-content {
    max-width: 100%;
    max-height: 90vh;
    border-radius: 1.25rem 1.25rem 0 0 !important;
    margin-bottom: 0;
  }
  
  .modal-header {
    padding: 1rem 1rem 0.75rem !important;
    position: sticky;
    top: 0;
    background: var(--card-bg);
    z-index: 10;
    border-bottom: 1px solid var(--border);
  }
  
  .modal-header h2 {
    font-size: 1.125rem !important;
  }
}

@media (min-width: 640px) and (max-width: 1023px) {
  .modal-content {
    max-width: 90vw;
  }
}

@media (min-width: 1024px) {
  .modal-content {
    max-width: 600px;
  }
}

/* ==========================================
   TOUCH DEVICE OPTIMIZATIONS
   ========================================== */
@media (hover: none) and (pointer: coarse) {
  /* Larger touch targets */
  button, 
  a, 
  input, 
  select, 
  textarea,
  .btn {
    min-height: 44px;
  }
  
  input[type="checkbox"],
  input[type="radio"] {
    min-width: 20px;
    min-height: 20px;
  }
  
  /* Disable hover transformations on touch */
  .card:hover,
  .btn:hover {
    transform: none;
  }
}

/* ==========================================
   LANDSCAPE MODE
   ========================================== */
@media (max-height: 500px) and (orientation: landscape) {
  .modal-content {
    max-height: 90vh !important;
    overflow-y: auto !important;
  }
  
  .ai-chat-widget {
    max-height: 80vh !important;
  }
}

/* ==========================================
   SAFE AREA INSETS (Notched Devices)
   ========================================== */
@supports (padding: max(0px)) {
  .safe-area-inset-top {
    padding-top: max(env(safe-area-inset-top), 0.5rem);
  }
  
  .safe-area-inset-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0.5rem);
  }
  
  .safe-area-inset-left {
    padding-left: max(env(safe-area-inset-left), 0.5rem);
  }
  
  .safe-area-inset-right {
    padding-right: max(env(safe-area-inset-right), 0.5rem);
  }
}

/* ==========================================
   OVERFLOW & SCROLL HANDLING
   ========================================== */
html, body {
  overflow-x: hidden;
  width: 100%;
}

@media (max-width: 767px) {
  body {
    overflow-x: hidden;
    position: relative;
  }
  
  .overflow-mobile-scroll {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  
  .overflow-mobile-scroll::-webkit-scrollbar {
    display: none;
  }
}

/* ==========================================
   RESPONSIVE IMAGES
   ========================================== */
img {
  max-width: 100%;
  height: auto;
}

/* ==========================================
   CONTAINER RESPONSIVE
   ========================================== */
.container-responsive {
  width: 100%;
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 0.75rem;
}

@media (min-width: 640px) {
  .container-responsive {
    padding: 0 1rem;
  }
}

@media (min-width: 1024px) {
  .container-responsive {
    padding: 0 1.5rem;
  }
}

/* ==========================================
   MOBILE BOTTOM NAV SPACING
   ========================================== */
@media (max-width: 1023px) {
  .desktop-sidebar {
    display: none;
  }
  
  /* Add bottom padding for content when bottom nav is present */
  .main-content-with-bottom-nav {
    padding-bottom: 80px !important;
  }
}

/* ==========================================
   UTILITY CLASSES
   ========================================== */
.text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Prevent text selection on interactive elements */
button, a, .no-select {
  -webkit-user-select: none;
  user-select: none;
}
